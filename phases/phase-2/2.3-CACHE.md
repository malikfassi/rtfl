# Milestone 2.3: Caching Layer

## Goals
- Cache Spotify and Genius data to reduce API calls
- Simple timestamp-based invalidation
- Basic error handling

## Tasks

### 1. Cache Implementation
- [ ] Create Cache Helper
  - [ ] Create src/lib/cache.ts
  - [ ] Add basic get/set operations using Prisma
  - [ ] Add simple timestamp checks

### 2. Spotify Caching
- [ ] Track Caching
  - [ ] Cache track data on first fetch
  - [ ] Return cached data if < 24h old
  - [ ] Refresh cache on miss/expiry

- [ ] Playlist Caching
  - [ ] Cache playlist data on first fetch
  - [ ] Return cached data if < 24h old
  - [ ] Refresh cache on miss/expiry

### 3. Genius Caching
- [ ] Lyrics Caching
  - [ ] Cache lyrics on first fetch
  - [ ] Return cached lyrics (no expiry needed)
  - [ ] Link with Spotify track ID

### 4. Error Handling
- [ ] Basic Error Recovery
  - [ ] Return stale cache on API error
  - [ ] Log cache misses
  - [ ] Handle database errors

### 5. Testing
- [ ] Basic Tests
  - [ ] Test cache hits/misses
  - [ ] Test timestamp expiry
  - [ ] Test error cases

### 6. Documentation
- [ ] Basic Documentation
  - [ ] Document cache helper functions
  - [ ] Document expiry rules
  - [ ] Add usage examples

## Verification
- [ ] Cache reduces API calls
- [ ] Timestamp expiry works
- [ ] Error handling works
- [ ] Tests passing

## Dependencies
```bash
# Using Prisma for cache tables (already set up)
``` 